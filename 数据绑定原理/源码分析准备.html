<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
  </head>
  <body>
    <div id="test">hello</div>
    <ul id="fragment_test">
      <li>test1</li>
      <li>test2</li>
      <li>test3</li>
    </ul>
    <!--  1. [].slice.call(lis): 将伪数组转换为真数组
    2. node.nodeType: 得到节点类型
    3. Object.defineProperty(obj, propertyName, {}): 给对象添加属性描述符
    4. Object.keys(obj): 得到对象自身可枚举属性组成的数组
    5. obj.hasOwnProperty(prop): 判断prop是否是obj自身的属性
    6. DocumentFragment: 文档碎片(高批量更新多个节点)  -->
    <script>
      //1. [].slice.call(lis): 将伪数组转换为真数组
      const lis = document.getElementsByTagName("li");
      console.log(lis instanceof Array, lis[1].innerHTML, lis.forEach); // false "test2" undefined
      const lis2 = Array.prototype.slice.call(lis);
      console.log(lis2 instanceof Array, lis2[1].innerHTML, lis2.forEach); //true "test2" ƒ forEach() { [native code] }

      //2. node.nodeType: 得到节点类型
      const elementNode = document.getElementById("test");
      const attrNode = elementNode.getAttributeNode("id");
      const textNode = elementNode.firstChild;
      console.log(elementNode.nodeType, attrNode.nodeType, textNode.nodeType);

      //3. Object.defineProperty(obj, propertyName, {}): 给对象添加属性描述符
      const obj = {
        firstName: "A",
        lastName: "B"
      };

      //属性描述符
      //1 数据描述符
      // configurable: 是否可以重新定义
      // enumerable: 是否可以枚举
      // value: 初始值
      // writeable: 是否可以修改属性值
      //2 访问描述符
      // get: 回调函数, 根据其他相关属性动态计算得到当前属性值
      // set: 回调函数, 监视当前属性值的变化, 更新其他相关的属性值
      Object.defineProperty(obj, "fullName", {
        get: function() {
          return this.firstName + "-" + this.lastName;
        },
        set: function(value) {
          const names = value.split("-");
          this.firstName = names[0];
          this.lastName = names[1];
        }
      });
      console.log(obj);
      obj.firstName = "c";
      obj.lastName = "d";
      console.log(obj.fullName);
      obj.fullName = "E-F";
      console.log(obj.firstName, obj.lastName);

      //4. Object.keys(obj): 得到对象自身可枚举属性组成的数组
      console.log(Object.keys(obj)) //
      // 5. obj.hasOwnProperty(prop): 判断prop是否是obj自身的属性

      //6. DocumentFragment: 文档碎片(高批量更新多个节点)
      // document: 对应显示的页面, 包含n 个
      // documentFragment: 内存

      const ul = document.getElementById('fragment_test')
      // 创建fragment
      const fragment = document.createDocumentFragment()
      let child 
      while(child = ul.firstChild){
        // appendChild 有移除的效果 
        fragment.appendChild(child)
      }

      Array.prototype.slice.call(fragment.childNodes).forEach(node => {
         if(node.nodeType === 1){
           node.textContent = 'hello'
         }
       })
      ul.appendChild(fragment)
    </script>
  </body>
</html>
